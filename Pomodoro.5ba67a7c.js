class Pomodoro{constructor(t,e,o){this.pomodoro=JSON.parse(localStorage.getItem("pomodoroValue"))??60*t,this.short=JSON.parse(localStorage.getItem("shortValue"))??60*e,this.long=JSON.parse(localStorage.getItem("longValue"))??60*o,this.seconds=0,this.interval=null,this.typeTimer="pomodoro",this.numIterations=0,this.timer=document.querySelector(".pomodoro__timer"),this.btnStart=document.querySelector(".functional__start"),this.btnReset=document.querySelector(".functional__reset"),this.form=document.querySelector(".form"),this.inputPomodoro=document.getElementById("pomodoro"),this.inputShort=document.getElementById("short"),this.inputLong=document.getElementById("long"),this.btnPomodoro=document.querySelector(".types-timers__pomodoro"),this.btnShort=document.querySelector(".types-timers__short"),this.btnLong=document.querySelector(".types-timers__long"),this.innerTypesTimers=document.querySelector(".pomodoro__types-timers"),this.notification=document.querySelector(".notification"),this.notificationText=document.querySelector(".notification__text"),this.btnsPomodoro=document.querySelectorAll(".pomodoro-btn"),this.modalSettings=document.querySelector("#modalSettings"),this.startListeners(),this.updateSeconds("pomodoro")}startListeners(){this.btnStart.addEventListener("click",()=>{this.btnStart.classList.contains("active")?(this.btnStart.classList.remove("active"),this.stop()):(this.btnStart.classList.add("active"),this.start())}),this.btnReset.addEventListener("click",()=>{this.updateSeconds("pomodoro"),this.stop(),this.changeActiveButton(this.btnPomodoro),this.btnStart.classList.remove("active")}),this.modalSettings.addEventListener("click",t=>{null===t.target.closest(".settings__wrap")&&this.closeModal()}),this.form.addEventListener("submit",t=>{t.preventDefault();let e=this.inputPomodoro.value<1||this.inputShort.value<1||this.inputLong.value<1;try{if(e)throw Error("Incorrect number");this.saveParameters(),this.updateParameters(),this.updateSeconds("pomodoro"),this.changeActiveButton(this.btnPomodoro),this.renderTimer(),this.stop(),this.closeModal(),this.btnStart.classList.remove("active")}catch(t){this.showNotification(t),this.closeModal()}}),this.innerTypesTimers.addEventListener("click",t=>{let e=t.target!==this.innerTypesTimers;switch(t.target){case this.btnPomodoro:this.changeActiveButton(this.btnPomodoro,"pomodoro",!0);break;case this.btnShort:this.changeActiveButton(this.btnShort,"short",!0);break;case this.btnLong:this.changeActiveButton(this.btnLong,"long",!0)}e&&(this.stop(),this.btnStart.classList.remove("active"))})}start(){this.interval=setInterval(()=>{0===this.seconds?(this.renderTimer(),this.switchTimer(this.typeTimer)):(this.seconds=--this.seconds,this.renderTimer())},1e3)}calculationTiming(){let t=Math.floor(this.seconds/60),e=this.seconds%60==0?"00":`${this.seconds%60<10?`0${this.seconds%60}`:this.seconds%60}`;return`${t}:${e}`}renderTimer(){this.timer.textContent=`${this.calculationTiming()}`}switchTimer(t){switch(t){case"pomodoro":this.numIterations=++this.numIterations,this.seconds=this.short,this.typeTimer="short",4===this.numIterations&&(this.seconds=this.long,this.typeTimer="long",this.numIterations=0);break;case"short":case"long":this.seconds=this.pomodoro,this.typeTimer="pomodoro"}switch(this.typeTimer){case"pomodoro":this.changeActiveButton(this.btnPomodoro);break;case"short":this.changeActiveButton(this.btnShort);break;case"long":this.changeActiveButton(this.btnLong)}}stop(){clearInterval(this.interval)}updateSeconds(t){this.typeTimer=t,this.numIterations=0,this.seconds=this[t],this.renderTimer()}calculationSecondsParameters(t){return t>60?3600:60*t}updateParameters(){this.pomodoro=this.calculationSecondsParameters(this.inputPomodoro.value),this.short=this.calculationSecondsParameters(this.inputShort.value),this.long=this.calculationSecondsParameters(this.inputLong.value)}saveParameters(){localStorage.setItem("pomodoroValue",JSON.stringify(this.calculationSecondsParameters(this.inputPomodoro.value))),localStorage.setItem("shortValue",JSON.stringify(this.calculationSecondsParameters(this.inputShort.value))),localStorage.setItem("longValue",JSON.stringify(this.calculationSecondsParameters(this.inputLong.value)))}closeModal(){this.modalSettings.close()}showNotification(t){this.notificationText.textContent=`${t.name}: ${t.message}`,this.notification.classList.remove("active"),this.notification.classList.add("active"),setTimeout(()=>{this.notification.classList.remove("active")},3e3)}removeClassActiveTimer(){this.btnsPomodoro.forEach(t=>{t.classList.remove("activeTimer")})}changeActiveButton(t,e=null,o=!1){this.removeClassActiveTimer(),t.classList.add("activeTimer"),o&&this.updateSeconds(e)}}new Pomodoro(25,5,15);
//# sourceMappingURL=Pomodoro.5ba67a7c.js.map
